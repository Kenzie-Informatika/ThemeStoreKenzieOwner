<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kenzie ThemeStore | Dashboard Update</title>
    <style>
        /* CSS ASLI KAMU */
        body { 
            background-color: #000; 
            color: #fff; 
            font-family: sans-serif; 
            padding: 40px 20px;
        }
        
        .card { 
            background: #111; 
            padding: 20px; 
            border-radius: 15px; 
            width: 100%;
            max-width: 400px; 
            margin: 0 auto 30px auto; 
            border: 1px solid #222;
        }

        h2, h3 { 
            text-align: center; 
            letter-spacing: 1px;
            margin-bottom: 20px;
        }

        input, textarea { 
            width: 100%; 
            background: #000; 
            border: 1px solid #333; 
            padding: 12px; 
            margin-bottom: 15px; 
            color: #fff; 
            border-radius: 8px;
            box-sizing: border-box;
            outline: none;
        }

        input:focus { border-color: #7b61ff; }

        .file-input {
            margin-bottom: 20px;
            font-size: 13px;
            color: #888;
        }

        .publish-btn { 
            width: 100%; 
            padding: 14px; 
            background: #fff; 
            color: #000; 
            border: none; 
            border-radius: 25px; 
            font-weight: bold; 
            cursor: pointer;
            transition: 0.3s;
        }

        .publish-btn:hover {
            background: #7b61ff;
            color: #fff;
        }

        /* Styling Daftar Tema */
        .active-themes {
            max-width: 450px;
            margin: auto;
        }

        .theme-item {
            background: #111;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #7b61ff;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .theme-info h4 { margin: 0; font-size: 16px; }
        .theme-info p { margin: 3px 0 0; font-size: 12px; color: #777; }
    </style>
</head>
<body>

    <div class="card">
        <h2>Update Content</h2>
        <form id="uploadForm" enctype="multipart/form-data">
            <input type="text" name="title" id="title" placeholder="Theme Title" required>
            <input type="text" name="designer" id="designer" placeholder="Designer Name">
            <input type="text" name="size" id="size" placeholder="File Size (ex: 4.5 MB)">
            <input type="url" name="link" id="link" placeholder="Direct Download Link">
            <textarea name="description" id="description" placeholder="Write something about this theme..." rows="3"></textarea>
            
            <div class="file-input">
                <label>Screenshot / File:</label>
                <input type="file" id="file" name="themeFile" required style="margin-top: 8px; border: none; padding: 0;">
            </div>
            
            <button type="submit" id="submitBtn" class="publish-btn">PUBLISH CHANGES</button>
        </form>
    </div>

    <div class="active-themes">
        <h3>ACTIVE THEMES</h3>
        <div id="themeList">
            <p style="text-align: center; color: #444; font-style: italic;">Belum ada tema yang dipublikasikan.</p>
        </div>
    </div>

    <script>
        // ==========================================
        //  TEMPAT API KEYS (Update di sini Kenzie)
        // ==========================================
        const firebaseConfig = {
          apiKey: "AIzaSyDAhN_BxC9c76kB2jzTJ05F0NXX9ZjRYqQ",
          authDomain: "themestorekenzie.firebaseapp.com",
          databaseURL: "https://themestorekenzie-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "themestorekenzie",
          storageBucket: "themestorekenzie.firebasestorage.app",
          messagingSenderId: "220524638997",
          appId: "1:220524638997:web:a7d4860fb6d2b179a9af1c",
          measurementId: "G-WTR3T92KWS"
        };
        // ==========================================

        const form = document.getElementById('uploadForm');
        const themeList = document.getElementById('themeList');

        form.onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            
            // Animasi Loading
            btn.innerText = "UPLOADING...";
            btn.disabled = true;

            // Mengambil data untuk preview di bawah (Lokal)
            const title = document.getElementById('title').value;
            const designer = document.getElementById('designer').value || "Kenzie Store";
            const size = document.getElementById('size').value;

            // Simulasi pengiriman API
            const formData = new FormData(form);
            
            try {
                // Catatan: '/api/upload' hanya bekerja jika kamu punya server backend.
                // Jika hanya untuk testing tampilan, ini akan masuk ke catch.
                const response = await fetch('/api/upload', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    alert('Berhasil diunggah!');
                }
            } catch (error) {
                // Untuk demo, kita langsung tambahkan ke list meskipun server offline
                console.log("Mode Demo: Menambahkan ke list.");
                
                // Menghapus tulisan "Belum ada tema" jika ada
                if(themeList.innerHTML.includes("Belum ada tema")) themeList.innerHTML = "";

                // Template Item baru
                const newItem = `
                    <div class="theme-item">
                        <div class="theme-info">
                            <h4>${title}</h4>
                            <p>By ${designer} â€¢ ${size}</p>
                        </div>
                        <span style="color: #7b61ff; font-size: 12px; font-weight: bold;">LIVE</span>
                    </div>
                `;
                
                themeList.insertAdjacentHTML('afterbegin', newItem);
                form.reset();
            } finally {
                btn.innerText = "PUBLISH CHANGES";
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
